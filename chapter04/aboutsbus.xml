<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>

<sect1 id="ch-preps-aboutsbus">
  <?dbhtml filename="aboutsbus.html"?>

  <title>Информация о SBU (стандартная единица времени сборки)</title>

  <para>Многим хотелось бы заранее знать приблизительное время, которое будет затрачено на
  компиляцию и установку каждого пакета. Поскольку LFS может быть собрана на разных
  машинах, невозможно точно назвать требуемое время. Самый большой пакет - Glibc занимает
  примерно 20 минут времени на быстрых компьютерах, а на медленных может потребоваться до трёх
  дней! Вместо фактического времени будет использоваться стандартная единица времени сборки
  - SBU.</para>

  <para>SBU вычисляется следующим образом: первым в этой книге будет скомпилирован пакет
  binutils из <xref linkend="chapter-cross-tools"/>, время затраченное на его компиляцию будет
  определено как SBU. Время компиляции остальных пакетов будет считаться относительно этой
  единицы.</para>

  <para>Например, рассмотрим пакет время сборки которого равно 4.5 SBU.
  Это означает, что если сборка и установка binutils заняла 10 минут, то на этот пакет уйдет
  примерно 45 минут. К счастью, время сборки большинства пакетов меньше, чем у binutils.</para>

  <para>SBU не даёт точную информацию, т.к. зависит от множества факторов, включая версию GCC
  хост-системы. Значения SBU приведены в книге для примерной оценки необходимого времени.
  Фактический результат может отличаться на десятки минут.</para>

  <note>
    <para>На современных системах с несколькими процессорами (или ядрами) время компиляции
    пакета можно сократить с помощью "параллельной сборки", указав количество доступных
    процессоров через переменную окружения или аргумент программы <command>make</command>.
    Например, процессор Intel i5-6500 может поддерживать четыре одновременных процесса:</para>

    <screen role="nodump"><userinput>export MAKEFLAGS='-j4'</userinput></screen>

    <para>или через параметр сборки:</para>

    <screen role="nodump"><userinput>make -j4</userinput></screen>

    <para>Когда многопоточность используется подобным образом, информация SBU может сильно
    искажаться. В некоторых случаях сборка может даже неудачно завершиться.
    Анализ результатов сборки будет затруднен, так как вывод будет содержать строки из
    разных процессов вперемешку. Если произошла проблема на этапе сборки, выполните сборку
    одним процессором и проанализируйте сообщение об ошибке.</para>
  </note>

</sect1>

