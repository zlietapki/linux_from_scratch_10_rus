<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>

<sect1 id="ch-preps-aboutsbus">
  <?dbhtml filename="aboutsbus.html"?>

  <title>Информация о SBU (стандартная единица времени сборки)</title>

  <para>Многим хотелось бы знать заранее приблизительное время, которое будет
  затрачено на компиляцию и установку каждого пакета. Так как система LFS может
  быть создана на разных машинах, невозможно точно предугадать нужное время.
  На компиляцию и сборку одного из больших пакетов - Glibc, может уйти примерно 20 минут
  на быстрых компьютерах, но на медленных машинах может занять до трёх дней!
  Вместо фактического времени, будет использоваться показатель SBU (стандартная единица
  времени сборки).</para>

  <para>Показатель SBU вычисляется следующим образом. Первым в этой книге будет
  собран пакет binutils из главы <xref linkend="chapter-cross-tools"/>, а время
  затраченное на его компиляцию будет определено, как единица времени сборки
  (Standard Build Unit) или (SBU). Значения времени компиляции остальных пакетов 
  будет считаться относительно этой единицы.</para>

  <para>Например, рассмотрим пакет время сборки которого равно 4.5 SBU.
  Это означает, если сборка и установка пакета binutils заняла 10 минут, то время на
  сборку и установку будет приблизительно 45 минут. К счастью, время сборки большинства
  пакетов меньше, чем у binutils.</para>

  <para>В общем случае информация о SBU может быть неточной и зависеть от множества факторов,
  включая версию GCC хоста. SBU представлены здесь для примерной оценки необходимого
  времени, фактический результат может отличаться на десятки минут.</para>

  <note>
    <para>Для современных компьютеров с несколькими процессорами или ядрами время
    компиляции пакета можно сократить выполняя "параллельную сборку".
    Сделать это можно указав количество доступных процессоров через переменную окружения
    или аргумент программы<command>make</command>. Например, процессор Intel i5-6500
    может поддерживать четыре одновременных процесса:</para>

    <screen role="nodump"><userinput>export MAKEFLAGS='-j4'</userinput></screen>

    <para>или через параметр сборки:</para>

    <screen role="nodump"><userinput>make -j4</userinput></screen>

    <para>Когда многопоточность используется подобным образом, информация SBU будет искажаться
    больше, чем обычно. В некоторых случаях сборка может даже неудачно завершиться.
    Анализ результатов сборки будет затруднен, так как вывод будет содержать строки 
    разных потоков вперемешку. Если произошла проблема на этапе сборки, выполните сборку
    в один поток и проанализируйте сообщение об ошибке.</para>
  </note>

</sect1>

